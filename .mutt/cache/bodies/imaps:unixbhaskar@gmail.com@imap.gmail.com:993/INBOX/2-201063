Delivered-To: unixbhaskar@gmail.com
Received: by 2002:a19:8c56:0:0:0:0:0 with SMTP id i22csp2798019lfj;
        Sun, 15 Sep 2019 00:33:12 -0700 (PDT)
X-Google-Smtp-Source: APXvYqzTVx9RT9DuEMttWeHHQs2X8kbDgQ3zjNlslVIH0Y5dzeTc3cvENWcZfhqSqrBwjIOWppdz
X-Received: by 2002:aa7:c4d0:: with SMTP id p16mr456100edr.266.1568532791888;
        Sun, 15 Sep 2019 00:33:11 -0700 (PDT)
ARC-Seal: i=1; a=rsa-sha256; t=1568532791; cv=none;
        d=google.com; s=arc-20160816;
        b=UN0hSYJgGq3gv8UdJ77cJwgep10yDFa+ws5KtLomB2qBasPFvLsou7ZYWp0Wqtxhp1
         2uPPtLXeu5ocq+cjh5D83nE9X7cOAimspPBx8e0ug82sdmYPkSbQ2gGs6MK1taaztzJr
         gsKLOnISun3WZAWkI6KqrgAQlFzqWjOTqbgTfdeLBeRfALUWp7mfuN0dBuqpx8ovvgVk
         jGPM5VVrBVraQA/n2Nxamz4ow0NUf6a6ROcrw+MQmInBnBk5v9ZCH9kUYMTzlYqxBhst
         t+6dgK9FdHd0sewq+sNM7lzl9rokEEl+MDlgidse4/JFI6JesSSSozCki8b+5mN8gP52
         lpng==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=list-id:precedence:sender:in-reply-to:content-disposition
         :mime-version:references:message-id:subject:cc:to:from:date;
        bh=sbml72VnOYATiGTqzBI8vrjTmP3YexTwS/kmbiuIsdU=;
        b=P/c8M+DSbk8SOggAATeND63MkyYkvVQbFZVeZRR8gH1mntsWW0IKeCIIhI+2ZI3+iv
         9/ZY8s3jI36dZjuQ/kD7AxpA6IO3trCS/PmfYA5mRLAdJaVPI9dWpoyaECe1A0qxQsh0
         wzDP8+dvot/7F44zy2BN34eArc0xXk0ruBQMlvP/TW45CU6bW2A7wqFQaizQan2o3DzI
         y/2KHFRu/tcr9xR1bbOYRwcC5lOJOvawZydQt+ZBltU0KIClizJu/YBwdpFt2sk9+a6H
         gVt3ArryYBOISLSF+ZVTC2/fMgzrmNJZqas+zDhR3Il3M+aWqkLUQSj7a7ufffzLFvBJ
         6Y+A==
ARC-Authentication-Results: i=1; mx.google.com;
       spf=pass (google.com: best guess record for domain of linux-kernel-owner@vger.kernel.org designates 209.132.180.67 as permitted sender) smtp.mailfrom=linux-kernel-owner@vger.kernel.org
Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: from vger.kernel.org (vger.kernel.org. [209.132.180.67])
        by mx.google.com with ESMTP id z7si20754032edb.160.2019.09.15.00.32.48;
        Sun, 15 Sep 2019 00:33:11 -0700 (PDT)
Received-SPF: pass (google.com: best guess record for domain of linux-kernel-owner@vger.kernel.org designates 209.132.180.67 as permitted sender) client-ip=209.132.180.67;
Authentication-Results: mx.google.com;
       spf=pass (google.com: best guess record for domain of linux-kernel-owner@vger.kernel.org designates 209.132.180.67 as permitted sender) smtp.mailfrom=linux-kernel-owner@vger.kernel.org
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726764AbfIOHFo (ORCPT <rfc822;sheriffesseson@gmail.com>
        + 99 others); Sun, 15 Sep 2019 03:05:44 -0400
Received: from gardel.0pointer.net ([85.214.157.71]:38286 "EHLO
        gardel.0pointer.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1725835AbfIOHFn (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Sun, 15 Sep 2019 03:05:43 -0400
Received: from gardel-login.0pointer.net (gardel.0pointer.net [85.214.157.71])
        by gardel.0pointer.net (Postfix) with ESMTP id 5F68CE81176;
        Sun, 15 Sep 2019 09:05:42 +0200 (CEST)
Received: by gardel-login.0pointer.net (Postfix, from userid 1000)
        id 09FE7160ADC; Sun, 15 Sep 2019 09:05:41 +0200 (CEST)
Date:   Sun, 15 Sep 2019 09:05:41 +0200
From:   Lennart Poettering <mzxreary@0pointer.de>
To:     Willy Tarreau <w@1wt.eu>
Cc:     Linus Torvalds <torvalds@linux-foundation.org>,
        "Alexander E. Patrakov" <patrakov@gmail.com>,
        "Ahmed S. Darwish" <darwish.07@gmail.com>,
        "Theodore Y. Ts'o" <tytso@mit.edu>,
        Andreas Dilger <adilger.kernel@dilger.ca>,
        Jan Kara <jack@suse.cz>, Ray Strode <rstrode@redhat.com>,
        William Jon McCann <mccann@jhu.edu>,
        zhangjs <zachary@baishancloud.com>, linux-ext4@vger.kernel.org,
        lkml <linux-kernel@vger.kernel.org>
Subject: Re: Linux 5.3-rc8
Message-ID: <20190915070541.GC29681@gardel-login>
References: <20190911173624.GI2740@mit.edu>
 <20190912034421.GA2085@darwi-home-pc>
 <20190912082530.GA27365@mit.edu>
 <CAHk-=wjyH910+JRBdZf_Y9G54c1M=LBF8NKXB6vJcm9XjLnRfg@mail.gmail.com>
 <20190914150206.GA2270@darwi-home-pc>
 <CAHk-=wjuVT+2oj_U2V94MBVaJdWsbo1RWzy0qXQSMAUnSaQzxw@mail.gmail.com>
 <214fed0e-6659-def9-b5f8-a9d7a8cb72af@gmail.com>
 <CAHk-=wiB0e_uGpidYHf+dV4eeT+XmG-+rQBx=JJ110R48QFFWw@mail.gmail.com>
 <20190915065655.GB29681@gardel-login>
 <20190915070103.GC20811@1wt.eu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20190915070103.GC20811@1wt.eu>
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On So, 15.09.19 09:01, Willy Tarreau (w@1wt.eu) wrote:

> On Sun, Sep 15, 2019 at 08:56:55AM +0200, Lennart Poettering wrote:
> > There's benefit in being able to wait until the pool is initialized
> > before we update the random seed stored on disk with a new one,
>
> And what exactly makes you think that waiting with arms crossed not
> doing anything else has any chance to make the situation change if
> you already had no such entropy available when reaching that first
> call, especially during early boot ?

That code can finish 5h after boot, it's entirely fine with this
specific usecase.

Again: we don't delay "the boot" for this. We just delay "writing a
new seed to disk" for this. And if that is 5h later, then that's
totally fine, because in the meantime it's just one bg process more that
hangs around waiting to do what it needs to do.

Lennart

--
Lennart Poettering, Berlin
