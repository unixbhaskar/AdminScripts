Delivered-To: unixbhaskar@gmail.com
Received: by 2002:ac2:5510:0:0:0:0:0 with SMTP id j16csp1887309lfk;
        Sun, 24 May 2020 12:47:45 -0700 (PDT)
X-Google-Smtp-Source: ABdhPJxbAc7l9O8AVB7OJ+d6wNCQuzztGoLfD3prt6NpuP5PWuqJaC3xBLXaBus1VRA44g/95caO
X-Received: by 2002:a17:906:5695:: with SMTP id am21mr15895624ejc.223.1590349665503;
        Sun, 24 May 2020 12:47:45 -0700 (PDT)
ARC-Seal: i=1; a=rsa-sha256; t=1590349665; cv=none;
        d=google.com; s=arc-20160816;
        b=wElIPOXonS8WB/sprM8RbyKw+H65OJmNvd/ICmt7/s1dtNQkxm5TTHGyPm3j1Swws+
         S+Piag2F+J6+9bs04Pw/3BIzmIMoYoSt8SJhll8IW7+BwH7dDZ3xwm1II+t0JpOYOOYQ
         FEO0zRMF7d7+YUjSdTuWzyMPfPylwu2yuvewEqGV9avpXbttZbcU5d0OPKbDGr1z1I/C
         Uh+ueONSRuLrje1Cl7yW/SD0hxmNwTSkD9iUGxz6DU+/JMn9n258bF1ukPkleOTSZjBs
         wUGij4VXDRWsFmMKQPM06UekICgUTZyski/0G/INos0DNvRKYnI6eUgzAz3RB7q4BdzX
         tYhg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=list-id:precedence:sender:in-reply-to:content-disposition
         :mime-version:references:message-id:subject:cc:to:from:date
         :dkim-signature;
        bh=UzjlXnMlPD/3bzHktmVC1T4lTXx3QohYSGxDfQNDNy8=;
        b=hrtp28gdxJNzWANwBgJ4uHz6Yzo5GUf1xnDv6pYlRuSJ0JxXlqr3QHNT8MOVPBXoDq
         aXKR0z2DcJ1/PZy6tfTha7UpUB0jTor83IHqeSsLIEgkKHsDcK70BBUP7slTKCF6pmaY
         mxmbbJtuPkW1E8dGIZiLgtECqZBuylRTWvwtQAfeNur3JxKEEDxa3pV2vTiptZ8/ZIzv
         ELGoZQ4nSVnfWDBP0uaQCKytWJ4iLXU3pp0IHu2BCE9s8/7hfPAHifkdOzFQfWspKAw4
         T1pRN0ORTzC8DvZZPIkcyOynAJAYb0mya2yJvjZzbt/2JUOIyzvRzaxBLCNunz7714iE
         39Xg==
ARC-Authentication-Results: i=1; mx.google.com;
       dkim=pass header.i=@kernel.org header.s=default header.b=e09oI2hx;
       spf=pass (google.com: domain of linux-kernel-owner@vger.kernel.org designates 23.128.96.18 as permitted sender) smtp.mailfrom=linux-kernel-owner@vger.kernel.org;
       dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=kernel.org
Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: from vger.kernel.org (vger.kernel.org. [23.128.96.18])
        by mx.google.com with ESMTP id r8si8666359eju.564.2020.05.24.12.47.10;
        Sun, 24 May 2020 12:47:45 -0700 (PDT)
Received-SPF: pass (google.com: domain of linux-kernel-owner@vger.kernel.org designates 23.128.96.18 as permitted sender) client-ip=23.128.96.18;
Authentication-Results: mx.google.com;
       dkim=pass header.i=@kernel.org header.s=default header.b=e09oI2hx;
       spf=pass (google.com: domain of linux-kernel-owner@vger.kernel.org designates 23.128.96.18 as permitted sender) smtp.mailfrom=linux-kernel-owner@vger.kernel.org;
       dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=kernel.org
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2388084AbgEXTpx (ORCPT <rfc822;tome01forkernel@gmail.com>
        + 99 others); Sun, 24 May 2020 15:45:53 -0400
Received: from mail.kernel.org ([198.145.29.99]:33428 "EHLO mail.kernel.org"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S2387792AbgEXTpw (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Sun, 24 May 2020 15:45:52 -0400
Received: from localhost (c-73-47-72-35.hsd1.nh.comcast.net [73.47.72.35])
        (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (No client certificate requested)
        by mail.kernel.org (Postfix) with ESMTPSA id B712C2076C;
        Sun, 24 May 2020 19:45:51 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
        s=default; t=1590349552;
        bh=xo5ejZDaCCRf9jcb4FqgdnHvCQyGh3GULiim19u1a7o=;
        h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
        b=e09oI2hxxfIAqYqp2myeTZtHRkakYHFyz36PWa7J2Voh783kudPYMQ7jx27hJU0f9
         VdPDpzuTeqyuHyvkL0Aj3M6+8yz1EQpu3WyrlLQyM7NuSbNq9olHKaL3KRHCxVwPM4
         9/3+JWdA5cuUqpvdcZ4VSKE6p/uy6GepPbDjppak=
Date:   Sun, 24 May 2020 15:45:50 -0400
From:   Sasha Levin <sashal@kernel.org>
To:     Linus Torvalds <torvalds@linux-foundation.org>
Cc:     Greg KH <gregkh@linuxfoundation.org>,
        Heikki Krogerus <heikki.krogerus@linux.intel.com>,
        Andrew Morton <akpm@linux-foundation.org>,
        Linux Kernel Mailing List <linux-kernel@vger.kernel.org>,
        Stephen Rothwell <sfr@canb.auug.org.au>
Subject: Re: [GIT PULL] Driver core fixes for 5.7-rc7 - take 2
Message-ID: <20200524194550.GV33628@sasha-vm>
References: <20200523131759.GA55886@kroah.com>
 <20200523152922.GA224858@kroah.com>
 <CAHk-=wih_B_8a48Au=6B+gwFcYnM7qF02dGX3R0QN_2bzVcjVA@mail.gmail.com>
 <20200524150018.GB11262@kroah.com>
 <CAHk-=wh4bZdCkhng3EsJCDhHLxHT6x4S66v5JQvusihVfYrc5Q@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Disposition: inline
In-Reply-To: <CAHk-=wh4bZdCkhng3EsJCDhHLxHT6x4S66v5JQvusihVfYrc5Q@mail.gmail.com>
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Sun, May 24, 2020 at 10:05:28AM -0700, Linus Torvalds wrote:
>Sasha mentioned "--follow", which also happens to show that commit,
>but that's more of an incidental happenstance than anything else. "git
>log --follow" is kind of a special case, where git stops doing some of
>the pathname-based simplifying, because if the file shows up from
>nothing, git will try to then figure out where it came from. The fact
>that "--follow" this ends up not pruning irrelevant history as
>aggressively is more of an implementation artifact than anything else.
>
>So generally, don't use "--follow". It's kind of a hack to emulate
>"track changes to a file", but it is a hack, and it fundamentally is a
>bogus operation (for all the same reasons that the CVS/SCCS/SVN/etc
>notion of a "file identity" is complete garbage and leads to
>fundamental problems).

Interesting. My thinking around --follow was that it's like
--full-history in the sense that it won't prune history, but it would
also keep listing history beyond file renames.

The --follow functionality is quite useful when looking at older
branches and trying to understand where changes should go into on those
older branches.

We also do have some notion of "file identity" in the kernel; it's
prevalent with "quirk files". Look at these for example:

  - drivers/mmc/core/quirks.h
  - sound/pci/hda/patch_*.c
  - drivers/hid/hid-quirks.c

We know that patches to those files are likely to contain quirks (which
we usually want to take into the Stable branches) so I might have a
script that monitors a list of these "special" files in which case I
need to see a complete list of commits that went into those files.

-- 
Thanks,
Sasha
