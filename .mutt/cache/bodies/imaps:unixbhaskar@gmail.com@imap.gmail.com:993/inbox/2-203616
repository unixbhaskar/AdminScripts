Delivered-To: unixbhaskar@gmail.com
Received: by 2002:a19:8c56:0:0:0:0:0 with SMTP id i22csp7716584lfj;
        Mon, 30 Sep 2019 16:47:46 -0700 (PDT)
X-Google-Smtp-Source: APXvYqzx12bPZCGCg1hQ8faiecAYRkyzA8P+NFi/HUXL6vwuFy2TLXS+tkqCKsyNXYYfCo/HQFSc
X-Received: by 2002:a17:906:d926:: with SMTP id rn6mr14599330ejb.175.1569887266893;
        Mon, 30 Sep 2019 16:47:46 -0700 (PDT)
ARC-Seal: i=1; a=rsa-sha256; t=1569887266; cv=none;
        d=google.com; s=arc-20160816;
        b=Anows3+Tl0gCsHaT9372Fqr5OfL5mTPNu5bAtUXXlMOtkKvTxlYMwEKVB1pNUbL3Jo
         NCZRaY8+2CA64MnY07+LCyj5L4hGPWCEvs4/AmRdlkotAxwruKvdWYU+LTJC73irIjIl
         P+7l348HojVvHhtUg6hAaJGh0ILlEeyxKdJjqFvdW+nlOcziJJsE0QoWGfI3wtEz4bTa
         uVeEpttV1I+mZHjRTDNL5f7ur3d+s9T3gC1TjsVAo47EcVCizlhZsntnjgHzTUBucYEh
         qlaJA4KGIuq0wFXA7GuQtlEjG73X1AJ18Lfj9hF0rvRBn5lERXmUQcGkzWISX7Qh5pq3
         H9ug==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=list-id:precedence:sender:in-reply-to:content-disposition
         :mime-version:references:message-id:subject:cc:to:from:date
         :dkim-signature;
        bh=7E0le2JCTjUiDFkkuVNU9DkNCJE27Nfw6G+FTi9oiDg=;
        b=OkCzWO7ewCvsFliMRlP/AdJ6YPyA+fj7PZW6fWwDoFTFGaPoYWm5yZew9pFWrMv5nc
         ZDpMkxBF9Stp7c/apYxbF9Ahxhix78eK/7CXt3vH/PKfKLFjWHrWg11bvBmcsaVJT2z/
         hr/0gwOcUGAHT6ljMU7hW9UMLoaM5YiyR+qVwM6m2CqXI2agImkWQ0Vy51hxRf5T1rsI
         3Qc/ngrydJkDwu69z0qXy27JwI5EXxHBGyGeFmTqG/pOV0nEvBzOeWBHqL2hvlbq18Cc
         vPEMRyesggii5Qz5f2VTWIfH5KzB1igdLT5h6Ou2W3qNmspK4WMYGIWK530aayO8m4H0
         /O1Q==
ARC-Authentication-Results: i=1; mx.google.com;
       dkim=pass (test mode) header.i=@onstation.org header.s=default header.b=DMUnUehI;
       spf=pass (google.com: best guess record for domain of linux-kernel-owner@vger.kernel.org designates 209.132.180.67 as permitted sender) smtp.mailfrom=linux-kernel-owner@vger.kernel.org
Return-Path: <linux-kernel-owner@vger.kernel.org>
Received: from vger.kernel.org (vger.kernel.org. [209.132.180.67])
        by mx.google.com with ESMTP id d15si7841787edb.7.2019.09.30.16.47.23;
        Mon, 30 Sep 2019 16:47:46 -0700 (PDT)
Received-SPF: pass (google.com: best guess record for domain of linux-kernel-owner@vger.kernel.org designates 209.132.180.67 as permitted sender) client-ip=209.132.180.67;
Authentication-Results: mx.google.com;
       dkim=pass (test mode) header.i=@onstation.org header.s=default header.b=DMUnUehI;
       spf=pass (google.com: best guess record for domain of linux-kernel-owner@vger.kernel.org designates 209.132.180.67 as permitted sender) smtp.mailfrom=linux-kernel-owner@vger.kernel.org
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1732476AbfI3XqU (ORCPT <rfc822;petrus.archlinux@gmail.com>
        + 99 others); Mon, 30 Sep 2019 19:46:20 -0400
Received: from onstation.org ([52.200.56.107]:35074 "EHLO onstation.org"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1727535AbfI3XqT (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Mon, 30 Sep 2019 19:46:19 -0400
Received: from localhost (c-98-239-145-235.hsd1.wv.comcast.net [98.239.145.235])
        (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (No client certificate requested)
        (Authenticated sender: masneyb)
        by onstation.org (Postfix) with ESMTPSA id 0E94C3E89E;
        Mon, 30 Sep 2019 23:46:19 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=onstation.org;
        s=default; t=1569887179;
        bh=mj9vwBsd085w9kLP7AB0YCRyeS221e0uvMfVjjjbr2I=;
        h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
        b=DMUnUehI+MQ+ByR2KVdAgWIOqvtfmWRWp1sfDv7KVs6v6SCj3f3HwBbiR1TdDE0lr
         8MmdQNDuLIn/GZ2Al+ugjI1Aol49GcxhFN5/zqAMSoKNpRROG8YbzUFva44ak0dyws
         iaX0qP7L44brX2qR5myEKWNsRd54ZhGrkcl0p5qM=
Date:   Mon, 30 Sep 2019 19:46:18 -0400
From:   Brian Masney <masneyb@onstation.org>
To:     "David F." <df7729@gmail.com>
Cc:     linux-kernel <linux-kernel@vger.kernel.org>
Subject: Re: What populates /proc/partitions ?
Message-ID: <20190930234618.GA5536@onstation.org>
References: <CAGRSmLsV96jK+7UB6T6k8j9u74oPSHTA+1TPU8F9G2NnOqCDJg@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <CAGRSmLsV96jK+7UB6T6k8j9u74oPSHTA+1TPU8F9G2NnOqCDJg@mail.gmail.com>
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Mon, Sep 30, 2019 at 03:47:21PM -0700, David F. wrote:
> Hi,
> 
> I want to find out why fd0 is being added to /proc/partitions and stop
> that for my build.  I've searched "/proc/partitions" and "partitions",
> not finding anything that matters.

It looks like it is done in block/genhd.c with this function:

static int __init proc_genhd_init(void)
{
        proc_create_seq("diskstats", 0, NULL, &diskstats_op);
        proc_create_seq("partitions", 0, NULL, &partitions_op);
        return 0;
}
module_init(proc_genhd_init);

Brian


> 
> If udev is doing it, what function is it call so I can search on that?
> 
> TIA!!
